# # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                ALEMBIC CONFIGURATION                #
# --------------------------------------------------- #
# Production-ready Alembic configuration file         #
# Used for managing database schema revisions         #
# # # # # # # # # # # # # # # # # # # # # # # # # # # #

[alembic]
# Path to migration scripts (relative to this file)
script_location      = %(here)s/core/db/migrations

# Optional: use timestamp-based filenames for revisions
# file_template      = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d-%%(rev)s_%%(slug)s

# Add the current directory to Python import path
prepend_sys_path     = .

# OS-dependent path separator (recommended)
path_separator       = os

# Encoding for generated migration scripts
output_encoding      = utf-8

# Timezone used when generating migration files (optional)
# timezone           = UTC

# Maximum length for autogenerated migration slugs
truncate_slug_length = 40
# hooks              = black

# # # # # # # # # # # # # # # # # # # # # # # # # # # #
#               DATABASE CONNECTION URL               #
# --------------------------------------------------- #
# The URL is read by env.py during migration          #
# You can override it using the ALEMBIC_URL env var   #
# # # # # # # # # # # # # # # # # # # # # # # # # # # #

sqlalchemy.url       = driver://user:pass@localhost/dbname

# # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                POST-GENERATION HOOKS                #
# --------------------------------------------------- #
# Automatically format or lint generated files        #
# Uncomment and adjust as needed                      #
# # # # # # # # # # # # # # # # # # # # # # # # # # # #

[post_write_hooks]
# Auto-format with black
# hooks              = black
# black.type         = console_scripts
# black.entrypoint   = black
# black.options      = -l 88 REVISION_SCRIPT_FILENAME

# Auto-lint and fix with ruff
# hooks              = ruff
# ruff.type          = module
# ruff.module        = ruff
# ruff.options       = check --fix REVISION_SCRIPT_FILENAME

# # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                       LOGGING                       #
# --------------------------------------------------- #
# Controls logging for Alembic, SQLAlchemy, etc       #
# # # # # # # # # # # # # # # # # # # # # # # # # # # #

[loggers]
keys                 = root, sqlalchemy, alembic

[handlers]
keys                 = console

[formatters]
keys                 = generic

[logger_root]
level                = WARNING
handlers             = console
qualname             =

[logger_sqlalchemy]
level                = WARNING
handlers             =
qualname             = sqlalchemy.engine

[logger_alembic]
level                = INFO
handlers             =
qualname             = alembic

[handler_console]
class                = StreamHandler
args                 = (sys.stderr,)
level                = NOTSET
formatter            = generic

[formatter_generic]
format               = %(asctime)s [%(levelname)s] %(name)s: %(message)s
datefmt              = %Y-%m-%d %H:%M:%S
